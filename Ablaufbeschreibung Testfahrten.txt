

Beschreibung des Ablaufs der Testfahren
(Dokumentation für Version V 0.9x der Torsteuerung)

Das Programm der Testfahrten gliedert sich in drei Phasen mit unterschiedlichen Zielen:
Phase 1: Ermittlung des minimalen PWM-Wertes, der zur Erkennung des Blockierstroms erforderlich ist
Phase 2: Ermittlung des minimalen PWM-Wertes, mit dem sich ein Tor bewegen lässt
Phase 3: Messung der Zeiten für das Öffnen und Schließen der Tore mit unterschiedlichen Geschwngigkeiten (=PWM-Werten)
??? Phase 4: Messung eines Stromwertes für das Abschalten bei einem Hindernis (kein Endanschlag), wenn die Tore mit voller Geschwindigkeit fahren

Nicht alle hierbei ermittelten Werte werden direkt für die weitere Programmierung benötigt, sollen aber bereits jetzt für den Fall ermittelt werden, dass sie später einmal benötigt werden.

Die 3 Phasen werden fest nacheinander durchgeführt; eine Änderung der Reihenfolge ist nicht vorgesehen.
Bei einem Neustart erfolgt wieder ein kompletter Durchlauf.
Die einzelnen Phasen bzw. Schritte werden jedoch manuell durch die Betätigung des Tasters initiiert, um zwischen den Phasen Gelegenheit zu haben, die auf der seriellen Schnittstelle ausgegebenen Werte zu sichern und den Ablauf zumindest in Teilen kontrollieren zu können.

Der gesamte Ablauf ist wie folgt:
a)	das Programm initialisiert sich und wartet dann auf einen Tastendruck um mit Phase 1 zu starten.
	Der Abschluss der Initialisierung wird mit einem dauerhaften Blinken im folgenden Rythmus angezeigt: 1sec an, 1sec aus
b)	Nach der Betätigung der Taste starte Phase 1 in 3 Abschnitten.
	1) Dabei werden zuerst beide Tore geöffnet und an den Anschlag gefahren, um einen definierten Zustand zu erreichen.
	Signal der Lampe: Blinken im folgenden Rythmus angezeigt: 0,2 sec an, 0,8 sec aus
	Die Tore können im Notfall durch Drücken der Taste gestoppt werden. Eine Fortsetzung der Testfahrten ist dann jedoch nicht mehr möglich; statt dessen muss die Steuerung neu gestartet werden und die Testfahren werden wieder von Beginn an durchlaufen.
	2) Nach dem Erreichen des Anschlags werden die Motoren automatisch gestoppt und beginnend mit einem PWM-Wert von 0 wird jeweils für 2 Sekunden getestet, ob die Stromstärke für die Erkennung eines Endanschlags erreicht wird. Ist dies nach 2 Sekunden nicht der Fall, wird der PWM-Wert um eine Stufe (= 10 Punkte) erhöht und erneut für 2 Sekunden gemessen. Die Ablauf wiederholt sich, bis zum ersten Mal die Strommessung einen Wert in Höhe der Abschaltschwelle für einen Endanschlag erreicht.
	Vor jeder neuen Messung wird der jeweils neue PWM-Wert ausgegeben.
	Signal der Lampe während der Messung: Blinken im folgenden Rythmus: 0,5 sec an, 0,5 sec aus.
	3) Den Abschluss der Messungen zeigt das folgende Signal an: Blinken im folgenden Rythmus: 1 sec an, 1 sec aus.
	Der PMW-Wert, bei dem der Abschaltstrom erkannt wurde, wird dann nochmal ausgegeben.
	Danach wartet das Programm auf einen weiteren Tastendruck, um Phase2 zu beginnen.
c)	